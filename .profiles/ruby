#!/usr/bin/env

function run_rspec() {
  if [ -f bin/rspec ]; then
    bin/spring rspec $1
  else
    bundle exec rspec $1
  fi
}

alias rails='bundle exec rails'
alias rake='bundle exec rake'
alias rspec='run_rspec'
alias spring='bundle exec spring'
alias fs='bundle exec foreman start -f Procfile.development'
alias guard='bundle exec guard'
alias guard-sidekiq='guard -P sidekiq'
alias guard-livereload='guard -P livereload'
alias guard-rubocop='guard -P rubocop'

alias rc='rails console'
alias rs='rails server'
alias rdbc='rails dbconsole'

alias rdbtp='rake db:test:prepare'
alias rdbm='rake db:migrate'
alias rdbmtp='rake db:migrate && rake db:test:prepare'
alias rdbms='rake db:migrate:status'
alias rdbmup='rake db:migrate:up'
alias rdbmdown='rake db:migrate:down'

#rbenv
export PATH="$HOME/.rbenv/bin:~/.rbenv/shims:$PATH"
eval "$(rbenv init -)"

#completions
[[ -r $HOME/.rvm/scripts/completion ]] && source $HOME/.rvm/scripts/completion
source $HOME/.profiles/rails_completion
source $HOME/.profiles/rake_completion

#aumenta o limite de mem√≥ria a ser atingido antes de rodar o garbage collector
export RUBY_GC_MALLOC_LIMIT=104857600
export RUBY_HEAP_FREE_MIN=200000
export RUBY_GC_HEAP_INIT_SLOTS=40000
